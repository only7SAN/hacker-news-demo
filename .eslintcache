[{"/Users/yun/shein/project/hacker-news/src/index.js":"1","/Users/yun/shein/project/hacker-news/src/reportWebVitals.js":"2","/Users/yun/shein/project/hacker-news/src/page/list/index.js":"3","/Users/yun/shein/project/hacker-news/src/page/item/index.js":"4","/Users/yun/shein/project/hacker-news/src/api/index.js":"5","/Users/yun/shein/project/hacker-news/src/page/item/comment-item/index.js":"6","/Users/yun/shein/project/hacker-news/src/page/reply/index.js":"7","/Users/yun/shein/project/hacker-news/src/tool/index.js":"8","/Users/yun/shein/project/hacker-news/src/page/layout/index.js":"9"},{"size":727,"mtime":1610702233412,"results":"10","hashOfConfig":"11"},{"size":362,"mtime":1610686939684,"results":"12","hashOfConfig":"11"},{"size":560,"mtime":1610702066205,"results":"13","hashOfConfig":"11"},{"size":1595,"mtime":1610702305771,"results":"14","hashOfConfig":"11"},{"size":680,"mtime":1610699439245,"results":"15","hashOfConfig":"11"},{"size":1629,"mtime":1610702299508,"results":"16","hashOfConfig":"11"},{"size":1802,"mtime":1610701839420,"results":"17","hashOfConfig":"11"},{"size":1206,"mtime":1610701755042,"results":"18","hashOfConfig":"11"},{"size":331,"mtime":1610697868798,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"94v6ew",{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"22"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"22"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"22"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"22"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"/Users/yun/shein/project/hacker-news/src/index.js",[],["44","45"],"/Users/yun/shein/project/hacker-news/src/reportWebVitals.js",[],["46","47"],"/Users/yun/shein/project/hacker-news/src/page/list/index.js",[],"/Users/yun/shein/project/hacker-news/src/page/item/index.js",["48","49"],"import React, { useEffect, useState, useCallback } from 'react';\nimport Api from '../../api';\nimport { html2Escape } from '../../tool';\nimport { useQuery } from '../../tool';\nimport CommentItem from './comment-item';\n\n// item 页面\nconst Item = () => {\n  const query = useQuery();\n\n  const [commentText, setCommentText] = useState('');\n  const [detail, setDetail] = useState(null);\n\n  useEffect(() => {\n    getDetail();\n  }, []);\n\n  const getDetail = () => {\n    Api.getItem(query.get('id')).then((data) => {\n      setDetail(data);\n    })\n  };\n\n  const handleTextChange = useCallback((e) => {\n    setCommentText(e.target.value);\n  }, []);\n\n  const submit = useCallback(() => {\n    if (commentText) {\n      Api.writeComment({ parentId: detail.id, text: html2Escape(commentText) }).then(() => {\n        // 重置页面内容\n        getDetail();\n      }).catch((err) => { console.log('评论失败')})\n    } else {\n      console.log('please write something');\n    }\n  }, [commentText]);\n\n  return detail && (\n    <div className=\"detail\">\n      <div className=\"detail-top\">\n        <div>** {detail.title}</div>\n        <textarea cols={40} rows={8} value={commentText} onChange={handleTextChange} />\n        <div>If you haven't already, would you mind reading about HN's approach to comments and site guidelines?</div>\n        <button onClick={submit}>add comment</button>\n      </div>\n      {\n        detail && detail.kids && detail.kids.length > 0 && detail.kids.map(kid => (\n          <CommentItem key={kid} kid={kid} id={detail.id} />\n        ))\n      }\n    </div>\n  );\n}\n\nexport default Item;\n","/Users/yun/shein/project/hacker-news/src/api/index.js",["50"],"const fetchApi = (url) => {\n  return fetch(url)\n    .then(function(response) {\n      return response.json();\n    })\n    .catch(err => {\n      // 错误处理\n      throw new Error()\n    });\n};\n\nexport default {\n  // 获取新闻\n  getItem: (id) => fetchApi(`https://hacker-news.firebaseio.com/v0/item/${id}.json?print=pretty`),\n  // 获取评论\n  getComment: (kid) => fetchApi(`https://hacker-news.firebaseio.com/v0/item/${kid}.json?print=pretty`),\n  // 获取最新的新闻\n  getNews: () => fetchApi('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty'),\n  // 添加评论\n  writeComment: () => fetchApi(),\n  // 添加评论\n  replyComment: () => fetchApi(),\n}\n","/Users/yun/shein/project/hacker-news/src/page/item/comment-item/index.js",["51"],"import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport sanitizeHtml from 'sanitize-html';\nimport Api from '../../../api';\nimport '../style.css';\n\n// comment 节点\nconst CommentItem = React.memo((props) => {\n  const history = useHistory();\n  const { kid, id } = props;\n\n  const [detail, setDetail] = useState(null);\n  // 展开、隐藏\n  const [isOpen, setIsOpen] = useState(true);\n  const [hasChild, setHasChild] = useState(false);\n\n  useEffect(() => {\n    Api.getComment(kid).then((data) => {\n      setDetail(data);\n      setHasChild(data.kids && data.kids.length > 0);\n    })\n  }, []);\n\n  const handleClick = () => {\n    setIsOpen(!isOpen)\n  };\n\n  const goReplyPage = () => {\n    history.push(`/reply?id=${id}&kid=${kid}`);\n  };\n\n  return detail && (\n    <div className=\"comment\">\n      <div className=\"comment-top\">\n        <div className=\"comment-title\">\n          ** {detail.by}\n          {hasChild && <div className=\"comment-change\" onClick={handleClick}>{isOpen ? '[收起]' : '[展开]'}</div>}\n        </div>\n        <div className=\"comment-content\" dangerouslySetInnerHTML={{ __html: sanitizeHtml(detail.text) }} />\n        <div className=\"comment-reply-btn\" onClick={goReplyPage}>reply</div>\n      </div>\n      {\n        hasChild && (\n          <div className={`comment-child ${isOpen ? 'comment-child-open' : 'comment-child-hide'}`}>\n            {\n              detail.kids.map(item =>(\n                <CommentItem key={item} kid={item} id={id} />\n              ))\n            }\n          </div>\n        )\n      }\n    </div>\n  );\n});\n\nexport default CommentItem;\n","/Users/yun/shein/project/hacker-news/src/page/reply/index.js",["52"],"import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport sanitizeHtml from 'sanitize-html';\nimport Api from '../../api';\nimport {html2Escape, useQuery} from '../../tool';\n\nimport './style.css';\n\n// 回复页面\nconst Reply = () => {\n  const query = useQuery();\n  const history = useHistory();\n\n  const [replyText, setReplyText] = useState('');\n  const [detail, setDetail] = useState(null);\n  const [commentDetail, setCommentDetail] = useState(null);\n\n  useEffect(() => {\n    getDetail();\n  }, []);\n\n  const getDetail = () => {\n    Promise.all([\n      Api.getItem(query.get('id')),\n      Api.getComment(query.get('kid')),\n    ]).then(([data, commentData]) => {\n      setDetail(data);\n      setCommentDetail(commentData);\n    })\n  };\n\n  const handleTextChange = (e) => {\n    setReplyText(e.target.value);\n  };\n\n  const submit = () => {\n    if (replyText) {\n      Api.replyComment({ parentId: detail.id, text: html2Escape(replyText) }).then(() => {\n        // 返回评论页面\n        history.push(`/item?id=${query.get('id')}`);\n      }).catch((err) => { console.log('回复失败')})\n    } else {\n      console.log('please write something');\n    }\n  };\n\n  return detail && commentDetail && (\n    <div className=\"reply-container\">\n      <div className=\"reply-title\">{detail.by} on: {detail.title} </div>\n      <div className=\"reply-content\" dangerouslySetInnerHTML={{ __html: sanitizeHtml(commentDetail.text) }} />\n      <textarea className=\"reply-textarea\" cols={40} rows={8} value={replyText} onChange={handleTextChange} />\n      <div>If you haven't already, would you mind reading about HN's approach to comments and site guidelines?</div>\n      <button className=\"reply-btn\" onClick={submit}>reply</button>\n    </div>\n  );\n};\n\nexport default Reply;\n","/Users/yun/shein/project/hacker-news/src/tool/index.js",[],"/Users/yun/shein/project/hacker-news/src/page/layout/index.js",[],{"ruleId":"53","replacedBy":"54"},{"ruleId":"55","replacedBy":"56"},{"ruleId":"53","replacedBy":"57"},{"ruleId":"55","replacedBy":"58"},{"ruleId":"59","severity":1,"message":"60","line":16,"column":6,"nodeType":"61","endLine":16,"endColumn":8,"suggestions":"62"},{"ruleId":"59","severity":1,"message":"63","line":37,"column":6,"nodeType":"61","endLine":37,"endColumn":19,"suggestions":"64"},{"ruleId":"65","severity":1,"message":"66","line":12,"column":1,"nodeType":"67","endLine":23,"endColumn":2},{"ruleId":"59","severity":1,"message":"68","line":22,"column":6,"nodeType":"61","endLine":22,"endColumn":8,"suggestions":"69"},{"ruleId":"59","severity":1,"message":"60","line":20,"column":6,"nodeType":"61","endLine":20,"endColumn":8,"suggestions":"70"},"no-native-reassign",["71"],"no-negated-in-lhs",["72"],["71"],["72"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getDetail'. Either include it or remove the dependency array.","ArrayExpression",["73"],"React Hook useCallback has missing dependencies: 'detail.id' and 'getDetail'. Either include them or remove the dependency array.",["74"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","React Hook useEffect has a missing dependency: 'kid'. Either include it or remove the dependency array.",["75"],["76"],"no-global-assign","no-unsafe-negation",{"desc":"77","fix":"78"},{"desc":"79","fix":"80"},{"desc":"81","fix":"82"},{"desc":"77","fix":"83"},"Update the dependencies array to be: [getDetail]",{"range":"84","text":"85"},"Update the dependencies array to be: [commentText, detail.id, getDetail]",{"range":"86","text":"87"},"Update the dependencies array to be: [kid]",{"range":"88","text":"89"},{"range":"90","text":"85"},[422,424],"[getDetail]",[946,959],"[commentText, detail.id, getDetail]",[622,624],"[kid]",[534,536]]