(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{112:function(e,t){},145:function(e,t){},150:function(e,t,n){},151:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(0),a=n.n(i),s=n(75),o=n.n(s),r=n(2),l=n(13),u=(n(82),n(83),n(84),function(e){return Object(c.jsxs)("div",{className:"layout-container",children:[Object(c.jsx)("header",{className:"layout-header",children:Object(c.jsx)("div",{children:"hacker-news"})}),Object(c.jsx)("div",{className:"layout-content",children:e.children})]})}),j=n(6),d=function(e){return fetch(e).then((function(e){return e.json()})).catch((function(e){throw new Error}))},b=function(e){return d("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json?print=pretty"))},h=function(e){return d("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json?print=pretty"))},m=function(){return d("https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty")},f=function(){return d()},O=function(){return d()},p=(n(85),function(){var e=Object(i.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){m().then((function(e){a(e)}))}),[]),Object(c.jsx)("div",{className:"App",children:n.map((function(e){return Object(c.jsx)("div",{className:"list-item",children:Object(c.jsx)(l.b,{to:"/item?id=".concat(e),children:e})},e)}))})}),x=function(){return new URLSearchParams(Object(r.g)().search)},v=function(e){return e.replace(/[<>&"]/g,(function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]}))};var g=n(25),y=n.n(g),k=(n(90),a.a.memo((function(e){var t=Object(r.f)(),n=e.kid,a=e.id,s=Object(i.useState)(null),o=Object(j.a)(s,2),l=o[0],u=o[1],d=Object(i.useState)(!0),b=Object(j.a)(d,2),m=b[0],f=b[1],O=Object(i.useState)(!1),p=Object(j.a)(O,2),x=p[0],v=p[1];Object(i.useEffect)((function(){h(n).then((function(e){u(e),v(e.kids&&e.kids.length>0)}))}),[]);return l&&Object(c.jsxs)("div",{className:"comment",children:[Object(c.jsxs)("div",{className:"comment-top",children:[Object(c.jsxs)("div",{className:"comment-title",children:["** ",l.by,x&&Object(c.jsx)("div",{className:"comment-change",onClick:function(){f(!m)},children:m?"[\u6536\u8d77]":"[\u5c55\u5f00]"})]}),Object(c.jsx)("div",{className:"comment-content",dangerouslySetInnerHTML:{__html:y()(l.text)}}),Object(c.jsx)("div",{className:"comment-reply-btn",onClick:function(){t.push("/reply?id=".concat(a,"&kid=").concat(n))},children:"reply"})]}),x&&Object(c.jsx)("div",{className:"comment-child ".concat(m?"comment-child-open":"comment-child-hide"),children:l.kids.map((function(e){return Object(c.jsx)(k,{kid:e,id:a},e)}))})]})}))),N=k,w=function(){var e=x(),t=Object(i.useState)(""),n=Object(j.a)(t,2),a=n[0],s=n[1],o=Object(i.useState)(null),r=Object(j.a)(o,2),l=r[0],u=r[1];Object(i.useEffect)((function(){d()}),[]);var d=function(){b(e.get("id")).then((function(e){u(e)}))},h=Object(i.useCallback)((function(e){s(e.target.value)}),[]),m=Object(i.useCallback)((function(){a?f({parentId:l.id,text:v(a)}).then((function(){d()})).catch((function(e){console.log("\u8bc4\u8bba\u5931\u8d25")})):console.log("please write something")}),[a]);return l&&Object(c.jsxs)("div",{className:"detail",children:[Object(c.jsxs)("div",{className:"detail-top",children:[Object(c.jsxs)("div",{children:["** ",l.title]}),Object(c.jsx)("textarea",{cols:40,rows:8,value:a,onChange:h}),Object(c.jsx)("div",{children:"If you haven't already, would you mind reading about HN's approach to comments and site guidelines?"}),Object(c.jsx)("button",{onClick:m,children:"add comment"})]}),l&&l.kids&&l.kids.length>0&&l.kids.map((function(e){return Object(c.jsx)(N,{kid:e,id:l.id},e)}))]})},S=(n(150),function(){var e=x(),t=Object(r.f)(),n=Object(i.useState)(""),a=Object(j.a)(n,2),s=a[0],o=a[1],l=Object(i.useState)(null),u=Object(j.a)(l,2),d=u[0],m=u[1],f=Object(i.useState)(null),p=Object(j.a)(f,2),g=p[0],k=p[1];Object(i.useEffect)((function(){N()}),[]);var N=function(){Promise.all([b(e.get("id")),h(e.get("kid"))]).then((function(e){var t=Object(j.a)(e,2),n=t[0],c=t[1];m(n),k(c)}))};return d&&g&&Object(c.jsxs)("div",{className:"reply-container",children:[Object(c.jsxs)("div",{className:"reply-title",children:[d.by," on: ",d.title," "]}),Object(c.jsx)("div",{className:"reply-content",dangerouslySetInnerHTML:{__html:y()(g.text)}}),Object(c.jsx)("textarea",{className:"reply-textarea",cols:40,rows:8,value:s,onChange:function(e){o(e.target.value)}}),Object(c.jsx)("div",{children:"If you haven't already, would you mind reading about HN's approach to comments and site guidelines?"}),Object(c.jsx)("button",{className:"reply-btn",onClick:function(){s?O({parentId:d.id,text:v(s)}).then((function(){t.push("/item?id=".concat(e.get("id")))})).catch((function(e){console.log("\u56de\u590d\u5931\u8d25")})):console.log("please write something")},children:"reply"})]})});o.a.render(Object(c.jsx)(l.a,{children:Object(c.jsx)(r.a,{path:"/",component:function(e){return Object(c.jsx)(u,{children:Object(c.jsxs)(r.c,{children:[Object(c.jsx)(r.a,{path:"/home",component:p}),Object(c.jsx)(r.a,{path:"/item",component:w}),Object(c.jsx)(r.a,{path:"/reply",component:S}),Object(c.jsx)(r.a,{path:"/",component:p})]})})}})}),document.getElementById("root"))},60:function(e,t){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},90:function(e,t,n){}},[[151,1,2]]]);
//# sourceMappingURL=main.8d9d3f56.chunk.js.map